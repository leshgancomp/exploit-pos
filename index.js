var FFI = require('ffi');
var ref = require("ref");
var eBridge = require("./pos/ebridge");

class ExploitPos {
    
    constructor(options, debug = false) {
        this.isDebug = debug;
        this.protocol = options.protocol;
        this.currency = options.currency;
        this.device = null;
        switch (this.protocol){
            case 'eBridge':
                this.device = new eBridge(debug);
                break;
        }
    }

    sale(amount) {
        var self = this;
        return new Promise(function (resolve, reject) {
            self.device.sale(amount, self.currency).then(function(data){
                resolve(data);
            }).catch(function(error){
                reject(error);
            });
        });
    }

    debug(...params) {
        if (this.isDebug) {
            console.log(params);
        }
    }
}
module.exports = ExploitPos;
